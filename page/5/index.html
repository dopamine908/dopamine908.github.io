<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Mobius - Laziness, Impatience and Hubris</title><meta name="author" content="Mobius Wu"><meta name="copyright" content="Mobius Wu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Laziness, Impatience and Hubris">
<meta property="og:type" content="website">
<meta property="og:title" content="Mobius">
<meta property="og:url" content="https://dopamine908.github.io/page/5/index.html">
<meta property="og:site_name" content="Mobius">
<meta property="og:description" content="Laziness, Impatience and Hubris">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://dopamine908.github.io/img/mobius_stripe.png">
<meta property="article:author" content="Mobius Wu">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://dopamine908.github.io/img/mobius_stripe.png"><link rel="shortcut icon" href="/img/mobius_stripe.png"><link rel="canonical" href="https://dopamine908.github.io/page/5/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Mobius',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-07-28 12:33:20'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/mobius_stripe.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">66</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">43</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">6</div></a></div><hr class="custom-hr"/></div></div><div class="page" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Mobius"><span class="site-name">Mobius</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/11/30/Other/PHP8ReleaseNoteStringToNumberComparison/" title="PHP8 - Release Note - 字串與數字的比對行為修正">PHP8 - Release Note - 字串與數字的比對行為修正</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-11-30T22:36:47.000Z" title="Created 2020-11-30 22:36:47">2020-11-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/PHP/">PHP</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/PHP/">PHP</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/PHP8/">PHP8</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/WTF-PHP/">WTF PHP</a></span></div><div class="content">PHP8 - Release Note - 字串與數字的比對行為修正前言在 PHP8 官方的 release 網頁中，看到一個似乎更新風險相當大的一個改動，如圖

同樣的比對會回傳不一樣的結果，感覺很可能導致很多產品的比較或是套件內的比較失效。我對於這樣的差異性感到好奇，照常理來說 PHP8 的結果會比較貼近於直覺，而 PHP8 以前為什麼會是那樣的結果呢? PHP8 做的這種更動，影響的範圍會不會比想像中還要更大呢?
所以我看了這個更新的 RFC ，以下會大致上以 RFC 的內容嘗試著去解釋差異性的前因後果。
PHP8 之前的字串與數字比對PHP8 以前的數字與字串比對是甚麼樣子的呢?是甚麼樣的運作會導致以下的結果呢?
10 == &#x27;foobar&#x27;; // bool(true)

PHP 將比較的運算子分為兩種:

Strict(嚴格) : &#x3D;&#x3D;&#x3D; 、 !&#x3D;&#x3D;
Non-strict(寬鬆) :  &#x3D;&#x3D; 、 !&#x3D; 、 &gt; 、 &gt;&#x3D; 、 &lt; 、 &lt;&#x3 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/11/25/WorkingEffectivelyWithLegacyCode/ch3/" title="Working Effectively with Legacy Code - Ch3 - 感測和分離">Working Effectively with Legacy Code - Ch3 - 感測和分離</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-11-25T20:56:15.000Z" title="Created 2020-11-25 20:56:15">2020-11-25</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Test/">Test</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Refactoring/">Refactoring</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Legacy-Code/">Legacy Code</a></span></div><div class="content">Working Effectively with Legacy Code - Ch3 - 感測和分離通常來說，我們想要將測試安置到位，有兩個理由去解除依賴:

感測：有時候我們想測試的類別會對其他類別做出影響，我們就需要透過解除依賴去「感測」這些影響
分離：當我們無法將一部份的程式碼放入測試工具中去執行時，通常需要透過解除依賴將這塊程式碼「分離」出來

通常來說，這兩個面向是伴隨著彼此而出現的，試想因為一部分的程式碼無法被測試，所以我就將這部分給分離出來，而他獨立出來後，或許class之間的互動就成為了新的測試議題，我們便會想要感測分離出來的class是否被正確的影響。
本書提及了相當多的解除依賴技術，而在這之中最主要的一項技術是：偽裝成合作者(fake object)
偽裝成合作者偽物件偽物件就是那些在測試中，用來代替被測試的類別的「合作者」的物件。底下我們看一個例子。
假設在一個POS系統中有一個 Sale 類別(如下圖)，Sale中含有一個 scan 的 function，當我們要掃條碼的時候就會呼叫這個 function，並且呼叫之後會在收銀機上顯示商品的名稱及價格。

那麼我 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/11/19/WorkingEffectivelyWithLegacyCode/ch2/" title="Working Effectively with Legacy Code - Ch2 - 帶著回饋工作">Working Effectively with Legacy Code - Ch2 - 帶著回饋工作</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-11-19T16:35:39.000Z" title="Created 2020-11-19 16:35:39">2020-11-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Test/">Test</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Refactoring/">Refactoring</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Legacy-Code/">Legacy Code</a></span></div><div class="content">Working Effectively with Legacy Code - Ch2 - 帶著回饋工作對系統進行變動，主要有兩種模式

編輯並祈禱(edit and pray)
覆蓋並修改(cover and modify)

編輯並祈禱(edit and pray)
Software and cathedrals are much the same – first we build them, then we pray.(Sam Redwine [Proceedings of the 4th International Software Process Workshop, Moretonhampstead, Devon, U.K., 11–13 May 1988, IEEE Computer Society])

軟體和教堂非常相似——建成之後我們就開始祈禱。（Sam Redwine）


仔細的計畫要做的更動，並確保自己理解要修改的程式碼，這一系列的動作看似細心謹慎且需要高度專業，但卻對於不變的部分卻缺乏任何工程手段去掌握，無法做出任何保證。通常在完成變更後，我們還需要大量的時間去 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/11/10/WorkingEffectivelyWithLegacyCode/ch1/" title="Working Effectively with Legacy Code - Ch1 - 修改軟體">Working Effectively with Legacy Code - Ch1 - 修改軟體</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-11-10T12:05:44.000Z" title="Created 2020-11-10 12:05:44">2020-11-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Test/">Test</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Refactoring/">Refactoring</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Legacy-Code/">Legacy Code</a></span></div><div class="content">Working Effectively with Legacy Code - Ch1 - 修改軟體前言本書的書名叫做「管理、修改、重構遺留程式碼的藝術」，那麼什麼是「遺留程式碼」呢？

普遍上來說的遺留程式碼的定義為：遺留程式碼就是指從其他人那裡得來的程式碼

而作者對於「遺留程式碼」的定義卻不盡然

作者認為的遺留程式碼定義為：沒有編寫測試的程式碼

作者表示他想透過這本書闡述以下的想法

沒有編寫測試的程式碼是糟糕的程式碼，不管我們多麼細心地去編寫它們，不管它們有多漂亮、物件導向或封裝良好。有了測試，我們就能夠迅速的、可驗證地修改程式碼的行為。沒有測試，我們就不知道修改後的程式碼，實際上是變得更好還是更糟。

以下開始進入第一章正式的內容。
修改軟體的四個起因一般來說，我們可以將修改軟體的起因區分為以下四大類

添加新特性
修正bug
改善設計
最佳化資源使用

添加特性和修正bug添加特性與修正Bug常常是相輔相成出現的，只差別在主觀上的認定(工程面及業務面)，作者認為其中最為重要的是，軟體的對外行為做出改變了。
改善設計其實就是我們所知的重構(Refactoring)，在不改變 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/11/04/SQLTips/ch4/" title="SQL達人的現場工作筆記 - Ch4 - 三元邏輯運算與NULL">SQL達人的現場工作筆記 - Ch4 - 三元邏輯運算與NULL</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-11-04T10:14:29.000Z" title="Created 2020-11-04 10:14:29">2020-11-04</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/SQL/">SQL</a></span></div><div class="content">SQL達人的現場工作筆記 - Ch4 - 三元邏輯運算與NULLIntro一般來說，普遍上的程式語言都會有布林值的資料類型(bool、boolean)，可以用作二元邏輯的判斷或是運算，而 SQL 除了 true 、 false 以外還另外追加了 unknown 這個第三值。所以 SQL 體系中，我們稱這種邏輯體系為三元邏輯(three-valued logic)。
起因是由於關連式資料庫的體系中具有 NULL 這個值，所以運算的時候必須將其納入考慮，也因為三元邏輯的判斷有時候相當詭異，所以常常會伴隨著一些很怪的結果。
理論篇你知道嗎？其實有兩種NULL。那到底是三元邏輯還是四元邏輯？兩種 NULL 分別是

Unknown 未知值
我們無法得知某個戴太陽眼鏡的人的眼睛顏色，這種叫做「未知值」，他有這個屬性，但我們不知道


Not Applicable, Inapplicable 不適性值
像是冰箱的眼睛顏色，由於他本身並不賦予這種屬性，我們無論如何都無法得知，這種叫做「不適性值」常常在表格中看到的 N&#x2F;A 符號，就是 Not Applicable 的縮寫



雖然說有兩種 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/10/19/DesignPattern/Memento/" title="Design Patterns - Behavioral - Memento Pattern 備忘錄模式">Design Patterns - Behavioral - Memento Pattern 備忘錄模式</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-10-19T20:47:23.000Z" title="Created 2020-10-19 20:47:23">2020-10-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Design-Patterns/">Design Patterns</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Behavioral-Patterns/">Behavioral Patterns</a></span></div><div class="content">設計模式 - Memento Pattern 備忘錄模式Intro假設今天我們想製作一個可以”上一步”的編輯器
實作為了顧及功能的靈活性，我們做了一些分工我們建立一個IDE的class(IDEOriginator)，讓他掌管原本IDE該有的所有功能再來我們需要一個儲存狀態的class(Memento)，讓我們可以把IDE的狀態變成某種資料格式儲存起來最後既然我們需要將IDE的狀態儲存起來，我們再新增一個可以管理儲存內容的class(CareTaker)接著來看看怎麼將他一步一步建構出來吧
首先，我們看一下IDEOriginator除了他的原本的功能外，我們為了儲存狀態及設定狀態多給了他2個function

createMemento : 將現在IDE的狀態轉化為一個Memento物件，讓這個物件負責掌管IDEOriginator的參數設定
setMemento : 可以將Memento輸入，並且將IDEOriginator的參數全部設定為Memento所記錄的樣子

12345678910111213141516171819202122232425262728class IDEOri ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/10/05/DesignPattern/ChainOfRespondibility/" title="Design Patterns - Behavioral - Chain of Responsibility Pattern 職責鏈模式">Design Patterns - Behavioral - Chain of Responsibility Pattern 職責鏈模式</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-10-05T17:12:55.000Z" title="Created 2020-10-05 17:12:55">2020-10-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Design-Patterns/">Design Patterns</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Behavioral-Patterns/">Behavioral Patterns</a></span></div><div class="content">設計模式 - Chain of Responsibility Pattern 職責鏈模式Intro假設我們今天要設計一個流程，當處理人處理不來的時候則轉交給下一個處理的人
例如今天產品出了問題小問題的話CEO就可以唬兩句就解決了但如果問題大一點的話，可能就要靠經理出來圓個場但如果今天問題更大的話，那只好摘贓底下的工程師，讓工程師加班來解決問題
以下我們來實作一下這個處理流程的程式
實作我們先定義一下出問題的類別，好讓各階層處理的人員可以判斷這個問題有多大條
1234567891011class Trouble&#123;    private $Level;    public function __construct(int $Level)    &#123;        $this-&gt;Level = $Level;    &#125;&#125;

我們希望每個腳色都有一個固定的介面可以去處理問題，所以這邊我們先新增一個抽象類別Handler，讓他制定一個handleTrouble方法，讓外部知道我們只要去使用這個方法就可以解決問題。另外因為處理不來的事情我們就要丟包給下一 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/09/23/DesignPattern/Mediator/" title="Design Patterns - Behavioral - Mediator Pattern 仲介者模式">Design Patterns - Behavioral - Mediator Pattern 仲介者模式</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-09-23T16:33:15.000Z" title="Created 2020-09-23 16:33:15">2020-09-23</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Design-Patterns/">Design Patterns</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Behavioral-Patterns/">Behavioral Patterns</a></span></div><div class="content">設計模式 - Mediator Pattern 仲介者模式Intro當很多物件互相需要協作的時候，物件間的耦合關係常常會變得比較混亂假設我們有三個國家的人在共同會議上需要傳訊息，但因為語言的隔閡，他們只能私訊另外兩個國家的人，並且貼上他們翻譯過後的文字，他們的互動關係會像下面這樣

但是如果今天有一個相當厲害的翻譯人員協助的話，我們就只要將自己的話告訴翻譯人員，他就會幫我們翻譯並且轉述給另外兩個國家的人了，加入了翻譯人員的互動關係會像下面這樣

讓某個腳色在中間為各種物件做協調，這就是仲介者模式的初始的想法
實作首先我們新增中介者的介面Mediator我們希望他可以扮演傳訊息給其他使用者的腳色，所以制定了一個sendToOther方法
123456interface Mediator&#123;    public function sendToOther(string $country_user, string $message): array;&#125;

再來我們定義一個抽象類別Colleague，這個腳色他必須知道要把訊息傳給誰，讓誰來擔任中介者，所以制定了一個Mediato ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/09/11/DesignPattern/Composite/" title="Design Patterns - Structural - Composite Pattern 組合模式">Design Patterns - Structural - Composite Pattern 組合模式</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-09-11T15:24:55.000Z" title="Created 2020-09-11 15:24:55">2020-09-11</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Design-Patterns/">Design Patterns</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Structural-Patterns/">Structural Patterns</a></span></div><div class="content">設計模式 - Composite Pattern 組合模式Intro假設我們今天要建構一個可以代表公司與部門之間結構的關係，公司可以包含分公司、可以包含部門，而部門可以包含子部門或是員工。
實作我們先建立一個Component類別，讓它具有可以擴充及移除的功能，且期望所有他的子類別都能夠有固定的行為(operation)
123456789101112131415abstract class Component&#123;    protected $name;    public function __construct(string $name)    &#123;        $this-&gt;name = $name;    &#125;        abstract public function add(Component $component);    abstract public function remove(Component $component);    abstract public function operation();&#125;

再來我們新 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/08/28/DesignPattern/SOLID_DIP-1/" title="SOLID - Dependency Inversion Principle - 依賴反轉轉原則">SOLID - Dependency Inversion Principle - 依賴反轉轉原則</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-08-28T20:14:52.000Z" title="Created 2020-08-28 20:14:52">2020-08-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%97%A5%E5%B8%B8%E9%96%8B%E7%99%BC%E7%AD%86%E8%A8%98/">日常開發筆記</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/SOLID/">SOLID</a></span></div><div class="content">SOLID - DIP (1) - DIP 與 IoCDependency Inversion Principle - 依賴反轉轉原則首先，我們先來看一段關於依賴反轉原則的敘述
定義wiki

A.High-level modules should not depend on low-level modules. Both should depend on abstractions (e.g. interfaces).B.Abstractions should not depend on details. Details (concrete implementations) should depend on abstractions.

A. 高階模組不應該依賴低階模組，兩者都應該依賴於抽象(例如interface)B. 抽象不應該依賴於具體，而具體實現應該依賴於抽象介面


如果你像我一樣看完之後一頭霧水的話，這邊應該大致上會產生幾個疑問

什麼是高階模組?什麼又是低階模組?
什麼是具體?什麼是抽象?
什麼是依賴?
什麼是抽象依賴於具體?
什麼是具體依賴於抽象?

依賴反轉? 先了解 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/4/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/#content-inner">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/#content-inner">6</a><a class="page-number" href="/page/7/#content-inner">7</a><a class="extend next" rel="next" href="/page/6/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/mobius_stripe.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Mobius Wu</div><div class="author-info__description">Laziness, Impatience and Hubris</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">66</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">43</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/dopamine908"><i class="fab fa-github"></i><span>My Github</span></a></div><div class="sticky_layout"><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Git/"><span class="card-category-list-name">Git</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Laravel/"><span class="card-category-list-name">Laravel</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/PHP/"><span class="card-category-list-name">PHP</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Testing-Laravel/"><span class="card-category-list-name">Testing Laravel</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%97%A5%E5%B8%B8%E9%96%8B%E7%99%BC%E7%AD%86%E8%A8%98/"><span class="card-category-list-name">日常開發筆記</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/"><span class="card-category-list-name">讀書會報告</span><span class="card-category-list-count">47</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/Job/" style="font-size: 1.14em; color: #999b9d">Job</a> <a href="/tags/Design-Pattern/" style="font-size: 1.1em; color: #999">Design Pattern</a> <a href="/tags/Test/" style="font-size: 1.46em; color: #99a7bb">Test</a> <a href="/tags/Pipeline/" style="font-size: 1.1em; color: #999">Pipeline</a> <a href="/tags/Design-Patterns/" style="font-size: 1.3em; color: #99a1ac">Design Patterns</a> <a href="/tags/Laravel-Helper/" style="font-size: 1.1em; color: #999">Laravel Helper</a> <a href="/tags/WTF-PHP/" style="font-size: 1.1em; color: #999">WTF PHP</a> <a href="/tags/Artisan/" style="font-size: 1.1em; color: #999">Artisan</a> <a href="/tags/CI-CD/" style="font-size: 1.1em; color: #999">CI/CD</a> <a href="/tags/ATDD/" style="font-size: 1.14em; color: #999b9d">ATDD</a> <a href="/tags/Command/" style="font-size: 1.14em; color: #999b9d">Command</a> <a href="/tags/Query/" style="font-size: 1.1em; color: #999">Query</a> <a href="/tags/Notification/" style="font-size: 1.1em; color: #999">Notification</a> <a href="/tags/Refactoring/" style="font-size: 1.34em; color: #99a3b0">Refactoring</a> <a href="/tags/Controller/" style="font-size: 1.1em; color: #999">Controller</a> <a href="/tags/Coding-Style/" style="font-size: 1.1em; color: #999">Coding Style</a> <a href="/tags/%E5%A4%A7%E8%A9%B1-AWS-%E9%9B%B2%E7%AB%AF%E6%9E%B6%E6%A7%8B/" style="font-size: 1.18em; color: #999ca1">大話 AWS 雲端架構</a> <a href="/tags/Crontab/" style="font-size: 1.14em; color: #999b9d">Crontab</a> <a href="/tags/Behavioral-Patterns/" style="font-size: 1.22em; color: #999ea4">Behavioral Patterns</a> <a href="/tags/%E6%8F%90%E5%8D%87%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88%E5%B8%AB%E7%9A%84%E9%9D%A2%E8%A9%A6%E5%8A%9B/" style="font-size: 1.18em; color: #999ca1">提升程式設計師的面試力</a> <a href="/tags/Unit-Test/" style="font-size: 1.22em; color: #999ea4">Unit Test</a> <a href="/tags/Blog/" style="font-size: 1.1em; color: #999">Blog</a> <a href="/tags/Structural-Patterns/" style="font-size: 1.1em; color: #999">Structural Patterns</a> <a href="/tags/PSR/" style="font-size: 1.1em; color: #999">PSR</a> <a href="/tags/SQL/" style="font-size: 1.18em; color: #999ca1">SQL</a> <a href="/tags/%E8%B3%87%E6%96%99%E7%B5%90%E6%A7%8B/" style="font-size: 1.1em; color: #999">資料結構</a> <a href="/tags/BDD/" style="font-size: 1.14em; color: #999b9d">BDD</a> <a href="/tags/Clean-Architecture/" style="font-size: 1.38em; color: #99a4b4">Clean Architecture</a> <a href="/tags/Laravel/" style="font-size: 1.34em; color: #99a3b0">Laravel</a> <a href="/tags/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/" style="font-size: 1.5em; color: #99a9bf">讀書會報告</a> <a href="/tags/Schedule/" style="font-size: 1.14em; color: #999b9d">Schedule</a> <a href="/tags/API/" style="font-size: 1.14em; color: #999b9d">API</a> <a href="/tags/AWS/" style="font-size: 1.18em; color: #999ca1">AWS</a> <a href="/tags/Creational-Patterns/" style="font-size: 1.18em; color: #999ca1">Creational Patterns</a> <a href="/tags/PHP/" style="font-size: 1.42em; color: #99a6b7">PHP</a> <a href="/tags/SOLID/" style="font-size: 1.14em; color: #999b9d">SOLID</a> <a href="/tags/SSH/" style="font-size: 1.1em; color: #999">SSH</a> <a href="/tags/Git/" style="font-size: 1.1em; color: #999">Git</a> <a href="/tags/Queue/" style="font-size: 1.14em; color: #999b9d">Queue</a> <a href="/tags/Legacy-Code/" style="font-size: 1.26em; color: #999fa8">Legacy Code</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">July 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">April 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">February 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">November 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">October 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">September 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/08/"><span class="card-archive-list-date">August 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">July 2022</span><span class="card-archive-list-count">1</span></a></li></ul></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 By Mobius Wu</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>