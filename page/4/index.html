<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Mobius - Laziness, Impatience and Hubris</title><meta name="author" content="Mobius Wu"><meta name="copyright" content="Mobius Wu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Laziness, Impatience and Hubris">
<meta property="og:type" content="website">
<meta property="og:title" content="Mobius">
<meta property="og:url" content="https://dopamine908.github.io/page/4/index.html">
<meta property="og:site_name" content="Mobius">
<meta property="og:description" content="Laziness, Impatience and Hubris">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://dopamine908.github.io/img/mobius_stripe.png">
<meta property="article:author" content="Mobius Wu">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://dopamine908.github.io/img/mobius_stripe.png"><link rel="shortcut icon" href="/img/mobius_stripe.png"><link rel="canonical" href="https://dopamine908.github.io/page/4/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Mobius',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-07-28 12:33:20'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/mobius_stripe.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">66</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">43</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">6</div></a></div><hr class="custom-hr"/></div></div><div class="page" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Mobius"><span class="site-name">Mobius</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/02/24/UnitTestArt/ch1_sec1-5_sec1-8/" title="單元測試的藝術 - Ch1 單元測試基礎 - Sec. 1.5 ~ 1.8">單元測試的藝術 - Ch1 單元測試基礎 - Sec. 1.5 ~ 1.8</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-02-24T13:42:52.000Z" title="Created 2021-02-24 13:42:52">2021-02-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Test/">Test</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Unit-Test/">Unit Test</a></span></div><div class="content">單元測試的藝術 - Ch1 單元測試基礎 - Sec. 1.5 ~ 1.81.5 一個簡單的單元測試範例其實就算沒有測試框架的輔助，我們也可以自己寫一個自動化的單元測試
舉例來說，有一個類別 SimpleParser ，裡面有一個 ParseAndSum 方法
ParseAndSum()Input輸入零個或多個逗號分開的數字所組成的字串
exaple: 1,2,3
Output
輸入不包含數字
則回傳 0


包含一個數字
則回傳該數字


包含多個數字
則回傳這些數字的相加



為了示範方便，該 fucntion 現在只能處理0個或是1個數字的情況

首先，我們有了一個已經實作了上述需求的 SimpleParser 類別
SimpleParser
1234567891011121314151617181920&lt;?phpnamespace Src;use Exception;class SimpleParser&#123;    public function ParseAndSum(string $number): int    &#123;        if (strle ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/02/14/SQLTips/ch17/" title="SQL達人的現場工作筆記 - Ch17 - 有關順序的冒險">SQL達人的現場工作筆記 - Ch17 - 有關順序的冒險</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-02-14T21:52:43.000Z" title="Created 2021-02-14 21:52:43">2021-02-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/SQL/">SQL</a></span></div><div class="content">SQL達人的現場工作筆記 - Ch17 - 有關順序的冒險知道視窗函數有多麼好用的人可能會有「這麼方便的工具怎麼這麼晚才問世，如果能早一點出現就好了」這樣的疑問。本章節將會介紹在視窗函數問世前的 SQL 發展脈絡。
姍姍來遲的主角視窗函數於 1990 年代後半才納入 SQL 標準，且在 2000 年代才開始支援，而 MySQL 更是等到 2017 才開始支援。以下我們來看一下大致上的年代表及其發展。
視窗函數年代表


年份
發展概述



1999
Oracle 8i 與 DB2 UDB7.1 將視窗函數當成（局部的） OLAP 函數支援。 Oracle 與 IBM 共同提出讓視窗函數接受 ANSI 認證，並於 SQL:1999 納為選項。


2003
於 SQL:2003 標準化為 Full Level


2005
Microsoft 於 SQL Server 2005 開始支援


2009
PostgreSQL 於 8.4 版開始支援


2011
SQL:2011 標準化為框架


2017
MySQL 於 8.0.11(GA) 支援


所以，
為什麼視窗函數這麼晚才來 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/02/02/SQLTips/ch12/" title="SQL達人的現場工作筆記 - Ch12 - SQL程式設計的模式">SQL達人的現場工作筆記 - Ch12 - SQL程式設計的模式</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-02-02T11:22:29.000Z" title="Created 2021-02-02 11:22:29">2021-02-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/">讀書會報告</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/SQL/">SQL</a></span></div><div class="content">SQL達人的現場工作筆記 - Ch12 - SQL程式設計的模式前言除了寫出可以運作的 SQL 外，對於 SQL 的維護也是相當重要，所以本章節將討論在撰寫 SQL 上的可讀性。
資料表設計名稱與意義在 SQL 中對應的欄位、資料表、索引應該都要賦予有意義的命名
SQL 中可以使用的三種文字

英文字母
數字
底線（ _ ）

雖然有些 SQL 系統也承認像是 $、#、* 之類的符號，但作者建議大家不要去使用，因為有可能會在需要將資料庫移植到別的系統上的時候出問題（例如：MySQL 移植到 Postgres）
另外作者也告訴大家請不要使用保留字（例如：Primary）當作命名，這會增加混亂
屬性與欄位比起將資料表涉及為 EAV(實體屬性值) 的方式，更建議將各種資料用途拆開，讓欄位去說明資料的本質
撰寫程式的方針註解在 clean code 裡面有討論到，我們應該要盡量讓命名取代註解但作者認為 SQL 絕對應該要給註解，他給出的理由有二

SQL 為宣告型語言，所以很難寫出像其他程式語言那種「能夠自己解釋自己的程式碼」
SQL 幾乎無法 step by step 去檢驗錯誤

註解的寫 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/01/21/Laravel/Pipeline/" title="Laravel 中的職責鏈模式 - Middleware 背後的魔法 及 在 Query 上的應用">Laravel 中的職責鏈模式 - Middleware 背後的魔法 及 在 Query 上的應用</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-01-21T14:25:44.000Z" title="Created 2021-01-21 14:25:44">2021-01-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Laravel/">Laravel</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/PHP/">PHP</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Laravel/">Laravel</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Pipeline/">Pipeline</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Middleware/">Middleware</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Query/">Query</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Design-Pattern/">Design Pattern</a></span></div><div class="content">Laravel 中的職責鏈模式 - Middleware 背後的魔法 及 在 Query 上的應用職責練模式這篇會用到職責練模式的概念，但不會從頭講解職責練模式，如果對於這個設計模式還不熟悉，建議先理解一下再來閱讀會對理解上比較有幫助一些
職責練模式 （可以參考這邊）
用簡單又較為口語化的方式來敘述職責練模式來說，我們讓一個處理的過程拆解成像是一個產線的感覺，這一站處理完換下一站處理，每一站都可以獨自判斷自己該運作或是根據某些條件 pass 給下一站
在設計上會讓大家共同實作某個讓執行者可以執行的介面，例如 handle() ， 底下看一下大致上的示意圖

所以說，為什麼會提到職責練模式呢？
其實，本篇的主角是一個 Laravel 官方文件也沒提及的一個類別，他叫做 Pipeline ，雖然沒有當作一個獨立的功能記載在文件上，但在 Laravel 的生命週期中卻扮演著相當重要的角色，而今天我們就是來試圖去理解它，並且將 Pipeline 獨立應用，看會發生什麼有趣的事情
Laravel Middleware以下的程式範例會使用 Laravel 官方的 github 上的程式碼，我們將會 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/01/07/Laravel/Notification/" title="Laravel Notifications - 以 Slack 為例子">Laravel Notifications - 以 Slack 為例子</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-01-07T10:35:41.000Z" title="Created 2021-01-07 10:35:41">2021-01-07</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Laravel/">Laravel</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/PHP/">PHP</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Laravel/">Laravel</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Notification/">Notification</a></span></div><div class="content">Laravel Notifications - 以 Slack 為例子故事是這樣的，最近筆者在研究如何擷取 RSS 內的資訊，並將最新資訊自動通知到 Slack 上，想寫一個訂閱 RSS 的機器人這樣的功能，於是乎在找資料的時候輾轉找到了 Laravel Notification 的 feature ，由於之前完全沒有使用過，所以就研究了一番，最後也真的有實作在自動通知的機器人的 code 裡面，以下來記錄一下學習的心得。
先來看看官方文件吧！在此先奉上官方文件
先跟著官方文件看一看這功能到底在幹嘛吧，首先官方告訴你 Notification 大致上就是可以讓你用來串接與通知有關的一些功能，內建也支援了一些 driver，例如： email, SMS, Slack… 之類的，接著開始告訴你該如何一步一步建構出這樣的功能
首先我們需要一個 Laravel 幫我們寫好的 Notification Class，於是我們一樣老方法呼叫 Artisan 幫我們把 Notification Class 建構出來
1php artisan make:notification HelloNotific ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/12/11/DesignPattern/SOLID_SRP/" title="SOLID - SRP - 單一職責原則 （Single Responsibility Principle）">SOLID - SRP - 單一職責原則 （Single Responsibility Principle）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-12-11T15:46:52.000Z" title="Created 2020-12-11 15:46:52">2020-12-11</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%97%A5%E5%B8%B8%E9%96%8B%E7%99%BC%E7%AD%86%E8%A8%98/">日常開發筆記</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/SOLID/">SOLID</a></span></div><div class="content">SOLID - SRP - 單一職責原則 （Single Responsibility Principle）這篇的主角是 SOLID 原則中的 S : 單一職責原則 （Single Responsibility Principle），由 Robert C. Martin 在 1990 年代提出
定義這邊我找到兩種定義，一種是在他出的書裡面提到的（書的連結）

A class should have one, and only one, reason to change.

另一個是我在 Martin 的個人部落格中提到的

The Single Responsibility Principle (SRP) states that each software module should have one and only one reason to change.

兩種定義翻譯起來的意思其實大同小異

一個類別（軟體模組）應當只有唯一一個可以改變他的理由

這邊要特別提到，網路上有不少的文獻會將單一職責原則的定義解釋為「一個模組、類別或函式只做一件事情」，但我想這樣的解讀跟 Marti ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/12/07/Laravel/ScheduleToJob_pt4_teamwork/" title="晚點再說啦三部曲之四 - 精美的合作">晚點再說啦三部曲之四 - 精美的合作</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-12-07T16:06:52.000Z" title="Created 2020-12-07 16:06:52">2020-12-07</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Laravel/">Laravel</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/PHP/">PHP</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Laravel/">Laravel</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Job/">Job</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Queue/">Queue</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Command/">Command</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Schedule/">Schedule</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Crontab/">Crontab</a></span></div><div class="content">晚點再說啦三部曲之四 - 精美的合作本文章使用的開發環境為
PHP : 7.3.11Laravel : 8.17.2Redis : 6.0MySQL : 8.0

前言老實說我不確定大家是不是會跟我有一樣的困擾，有的時候單獨的功能即便看懂了，也不知道該如何使用，更何況有時候的狀況是我根本連功能介紹都看不懂。即便我們好不容易知道了功能的用途，卻不知道該在什麼樣的情境下能夠聯想到可以使用。所以我在撰寫前面的文章的時候很努力的想要創造一個合理的情境，讓讀的人可以有一個想像力能夠去聯想到在什麼時候可以連結這些功能去運用。再者，筆者我在學習這一系列功能的初期根本不能夠理解這些東西的運作及個別的配合，也是經過了摸索及研究，好不容易才看得清這些功能大致上的全貌，所以我認為有時候我們必須將眼光拉遠一點，先去知道一個流程中哪個部分是負責什麼事情，再進而去理解每個部分如何達成這件事情，這樣對於學習上來說會比較容易一點。
所以呢，就像四大天王一定有五個人一樣，三部曲也是會有第四個部分，我們來將之前的三個部分給串連起來。
所以說我們來做一個「每分鐘自動寄 EDM 給所有使用者」的功能吧～
我知道這功能聽起來很 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/12/04/Laravel/ScheduleToJob_pt3_schedule/" title="晚點再說啦三部曲之三 - Laravel Task Scheduling - 基礎篇">晚點再說啦三部曲之三 - Laravel Task Scheduling - 基礎篇</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-12-04T22:05:12.000Z" title="Created 2020-12-04 22:05:12">2020-12-04</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Laravel/">Laravel</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/PHP/">PHP</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Laravel/">Laravel</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Schedule/">Schedule</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Crontab/">Crontab</a></span></div><div class="content">晚點再說啦三部曲之三 - Laravel Task Scheduling - 基礎篇本文章使用的開發環境為
PHP : 7.3.11Laravel : 8.16.1Redis : 6.0MySQL : 8.0

前言如上一篇所述，本篇要來探討「如何在某個時間點觸發」。
我們一樣來想像一個情境，假設今天你的客戶要做一個電商網站，他跟你說他需要在每週一收到一封上週的銷售報表，時間的結算週期為週一的凌晨00:00到週日的晚上12:00，這樣的話我們該如何去實作這樣的需求呢？
我們可能會先想到，我們的網頁是在 Linux 上運作，那我們使用 Linux 上的 crontob 去設定週期，讓他在每週一的凌晨 00:05 去執行生成上週的報表並寄信的功能就好啦！
的確，這可以解決問題，但當今天我們的電商網站逐漸茁壯，我們要記得報表越來越多元，每一種爆報表的時間週期也都不盡相同，而且因為流量的上升，我們常常需要開好幾台 Server 去做流量的分流，這意味著我必須在每一台 Server 上都定義相同的 crontab 才行，而如果這時候，我要新增一種新的寄送報表任務呢？又或是要更改某一個報表的寄送週 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/12/03/Laravel/ScheduleToJob_pt2_command/" title="晚點再說啦三部曲之二 - Laravel Artisan Console - 基礎篇">晚點再說啦三部曲之二 - Laravel Artisan Console - 基礎篇</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-12-03T16:13:39.000Z" title="Created 2020-12-03 16:13:39">2020-12-03</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Laravel/">Laravel</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/PHP/">PHP</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Laravel/">Laravel</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Artisan/">Artisan</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Command/">Command</a></span></div><div class="content">晚點再說啦三部曲之二 - Laravel Artisan Console - 基礎篇本文章使用的開發環境為
PHP : 7.3.11Laravel : 8.16.1Redis : 6.0MySQL : 8.0

前言在開發的過程中，「如果我想要在特定的時間點做某些事情呢？」這種需求也相當常見，這個所謂的「某些事情」工作量可能非常龐大，很自然的我們可以想到，「要是我可以在某個時間點觸發某個動作，然後讓他把對應的工作放到某個地方慢慢消化就好了」，而「把對應的工作放到某個地方慢慢消化」這就是我們上一篇的主題，接下來我們要專注於，「如何在某個時間點觸發某個動作」
而這篇主要著重於如何處理「觸發某個動作」，而下一篇將要探討「如何在某個時間點觸發」
講到要「觸發某個動作」， Web 的開發者會很自然的想到要去寫一個可以瀏覽的網址去當作觸發的媒介，當我們瀏覽這個網址一次，就觸發對應的動作，這看起來相當合理也很直覺，但視情況而言，這種方式可能會成為一個不是很好的解決方式。
舉個例子來說吧，電商網站常常會有寄送廣告信件的功能，那們我如果將「寄送廣告給所有使用者」這個動作寫成一個網址，再讓知道網址的人瀏覽 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/12/02/Laravel/ScheduleToJob_pt1_Job/" title="晚點再說啦三部曲之一 - Laravel Queue Job with Redis - 基礎篇">晚點再說啦三部曲之一 - Laravel Queue Job with Redis - 基礎篇</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2020-12-02T16:00:24.000Z" title="Created 2020-12-02 16:00:24">2020-12-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Laravel/">Laravel</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/PHP/">PHP</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Laravel/">Laravel</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Job/">Job</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Queue/">Queue</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Redis/">Redis</a></span></div><div class="content">晚點再說啦三部曲之一 - Laravel Queue Job with Redis - 基礎篇本文章使用的開發環境為
PHP : 7.3.11Laravel : 8.16.1Redis : 6.0MySQL : 8.0

前言對於網站來說，一個 Request 就代表一個從頭開始生成到最後銷毀的生命週期，時常我們會遇到一種狀況 :「如果我有一件事情想要在 request 結束之後的才做呢?」舉個例子來說，試想我們有一個需求，需要在客戶下單後去寫入一個特殊的 Log ，以供之後做分析使用，而這個 Log 寫入普遍上來說又比較耗時(假設通常每一筆的寫入需耗費約一秒的時間成本)，那這樣不是會拖慢我們網站給使用者回饋的速度嗎?那麼在這種情境之下我們開如何去處理，從而節省那寶貴的一秒鐘呢?
想法其實很簡單，就像我們的日常工作一樣，有些東西不急，我們就先加入代辦事項，晚點再來做。而對於上面的需求來說，寫入特殊的 Log 並不是一定要立即更新那麼急迫的，所以我們要做的是

找一個地方，把不急的工作給放進去記錄下來
有空的時候我們就可以去這個地方把工作撿回來做完

這樣的情境與想法可以當作學習 Lar ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/3/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/#content-inner">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/#content-inner">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/#content-inner">7</a><a class="extend next" rel="next" href="/page/5/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/mobius_stripe.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Mobius Wu</div><div class="author-info__description">Laziness, Impatience and Hubris</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">66</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">43</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/dopamine908"><i class="fab fa-github"></i><span>My Github</span></a></div><div class="sticky_layout"><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Git/"><span class="card-category-list-name">Git</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Laravel/"><span class="card-category-list-name">Laravel</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/PHP/"><span class="card-category-list-name">PHP</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Testing-Laravel/"><span class="card-category-list-name">Testing Laravel</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%97%A5%E5%B8%B8%E9%96%8B%E7%99%BC%E7%AD%86%E8%A8%98/"><span class="card-category-list-name">日常開發筆記</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/"><span class="card-category-list-name">讀書會報告</span><span class="card-category-list-count">47</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/Job/" style="font-size: 1.14em; color: #999b9d">Job</a> <a href="/tags/Design-Pattern/" style="font-size: 1.1em; color: #999">Design Pattern</a> <a href="/tags/Test/" style="font-size: 1.46em; color: #99a7bb">Test</a> <a href="/tags/Pipeline/" style="font-size: 1.1em; color: #999">Pipeline</a> <a href="/tags/Design-Patterns/" style="font-size: 1.3em; color: #99a1ac">Design Patterns</a> <a href="/tags/Laravel-Helper/" style="font-size: 1.1em; color: #999">Laravel Helper</a> <a href="/tags/WTF-PHP/" style="font-size: 1.1em; color: #999">WTF PHP</a> <a href="/tags/Artisan/" style="font-size: 1.1em; color: #999">Artisan</a> <a href="/tags/CI-CD/" style="font-size: 1.1em; color: #999">CI/CD</a> <a href="/tags/ATDD/" style="font-size: 1.14em; color: #999b9d">ATDD</a> <a href="/tags/Command/" style="font-size: 1.14em; color: #999b9d">Command</a> <a href="/tags/Query/" style="font-size: 1.1em; color: #999">Query</a> <a href="/tags/Notification/" style="font-size: 1.1em; color: #999">Notification</a> <a href="/tags/Refactoring/" style="font-size: 1.34em; color: #99a3b0">Refactoring</a> <a href="/tags/Controller/" style="font-size: 1.1em; color: #999">Controller</a> <a href="/tags/Coding-Style/" style="font-size: 1.1em; color: #999">Coding Style</a> <a href="/tags/%E5%A4%A7%E8%A9%B1-AWS-%E9%9B%B2%E7%AB%AF%E6%9E%B6%E6%A7%8B/" style="font-size: 1.18em; color: #999ca1">大話 AWS 雲端架構</a> <a href="/tags/Crontab/" style="font-size: 1.14em; color: #999b9d">Crontab</a> <a href="/tags/Behavioral-Patterns/" style="font-size: 1.22em; color: #999ea4">Behavioral Patterns</a> <a href="/tags/%E6%8F%90%E5%8D%87%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88%E5%B8%AB%E7%9A%84%E9%9D%A2%E8%A9%A6%E5%8A%9B/" style="font-size: 1.18em; color: #999ca1">提升程式設計師的面試力</a> <a href="/tags/Unit-Test/" style="font-size: 1.22em; color: #999ea4">Unit Test</a> <a href="/tags/Blog/" style="font-size: 1.1em; color: #999">Blog</a> <a href="/tags/Structural-Patterns/" style="font-size: 1.1em; color: #999">Structural Patterns</a> <a href="/tags/PSR/" style="font-size: 1.1em; color: #999">PSR</a> <a href="/tags/SQL/" style="font-size: 1.18em; color: #999ca1">SQL</a> <a href="/tags/%E8%B3%87%E6%96%99%E7%B5%90%E6%A7%8B/" style="font-size: 1.1em; color: #999">資料結構</a> <a href="/tags/BDD/" style="font-size: 1.14em; color: #999b9d">BDD</a> <a href="/tags/Clean-Architecture/" style="font-size: 1.38em; color: #99a4b4">Clean Architecture</a> <a href="/tags/Laravel/" style="font-size: 1.34em; color: #99a3b0">Laravel</a> <a href="/tags/%E8%AE%80%E6%9B%B8%E6%9C%83%E5%A0%B1%E5%91%8A/" style="font-size: 1.5em; color: #99a9bf">讀書會報告</a> <a href="/tags/Schedule/" style="font-size: 1.14em; color: #999b9d">Schedule</a> <a href="/tags/API/" style="font-size: 1.14em; color: #999b9d">API</a> <a href="/tags/AWS/" style="font-size: 1.18em; color: #999ca1">AWS</a> <a href="/tags/Creational-Patterns/" style="font-size: 1.18em; color: #999ca1">Creational Patterns</a> <a href="/tags/PHP/" style="font-size: 1.42em; color: #99a6b7">PHP</a> <a href="/tags/SOLID/" style="font-size: 1.14em; color: #999b9d">SOLID</a> <a href="/tags/SSH/" style="font-size: 1.1em; color: #999">SSH</a> <a href="/tags/Git/" style="font-size: 1.1em; color: #999">Git</a> <a href="/tags/Queue/" style="font-size: 1.14em; color: #999b9d">Queue</a> <a href="/tags/Legacy-Code/" style="font-size: 1.26em; color: #999fa8">Legacy Code</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">July 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">April 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">February 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">November 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">October 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">September 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/08/"><span class="card-archive-list-date">August 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">July 2022</span><span class="card-archive-list-count">1</span></a></li></ul></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 By Mobius Wu</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>